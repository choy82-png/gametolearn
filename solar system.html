<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¢ç´¢å¤ªé˜³ç³» - ä¸‰å¹´çº§ç§‘å­¦äº’åŠ¨æ¸¸æˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .planet-orbit {
            animation: orbit 10s linear infinite;
        }
        
        @keyframes orbit {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .bounce {
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .draggable {
            cursor: move;
            transition: transform 0.2s;
        }
        
        .draggable:hover {
            transform: scale(1.05);
        }
        
        .drop-zone {
            border: 2px dashed #60a5fa;
            transition: all 0.3s;
        }
        
        .drop-zone.drag-over {
            background-color: #dbeafe;
            border-color: #3b82f6;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-purple-900 via-blue-900 to-black min-h-screen text-white overflow-x-hidden">
    <!-- Stars Background -->
    <div id="stars-container" class="fixed inset-0 pointer-events-none"></div>
    
    <!-- Welcome Page -->
    <div id="welcome-page" class="min-h-screen flex flex-col items-center justify-center p-4">
        <div class="text-center max-w-4xl mx-auto">
            <!-- Animated Astronaut -->
            <div class="mb-8 bounce">
                <svg width="120" height="120" viewBox="0 0 120 120" class="mx-auto">
                    <circle cx="60" cy="45" r="25" fill="#f3f4f6" stroke="#374151" stroke-width="2"/>
                    <circle cx="55" cy="40" r="3" fill="#1f2937"/>
                    <circle cx="65" cy="40" r="3" fill="#1f2937"/>
                    <path d="M55 50 Q60 55 65 50" stroke="#1f2937" stroke-width="2" fill="none"/>
                    <rect x="45" y="70" width="30" height="40" rx="5" fill="#ef4444"/>
                    <rect x="35" y="75" width="15" height="25" rx="3" fill="#ef4444"/>
                    <rect x="70" y="75" width="15" height="25" rx="3" fill="#ef4444"/>
                    <rect x="50" y="110" width="8" height="15" rx="2" fill="#374151"/>
                    <rect x="62" y="110" width="8" height="15" rx="2" fill="#374151"/>
                </svg>
            </div>
            
            <h1 class="text-6xl font-bold mb-4 text-yellow-300">ğŸš€ æ¢ç´¢å¤ªé˜³ç³» ğŸŒŸ</h1>
            <p class="text-2xl mb-8 text-blue-200">ä¸€èµ·æ¥æ¢ç´¢å¤ªé˜³ç³»çš„ç§˜å¯†å§ï¼</p>
            
            <!-- Orbiting Planets -->
            <div class="relative w-64 h-64 mx-auto mb-8">
                <div class="absolute inset-0 planet-orbit">
                    <div class="w-4 h-4 bg-red-500 rounded-full absolute top-0 left-1/2 transform -translate-x-1/2"></div>
                </div>
                <div class="absolute inset-4 planet-orbit" style="animation-duration: 8s;">
                    <div class="w-3 h-3 bg-orange-400 rounded-full absolute top-0 left-1/2 transform -translate-x-1/2"></div>
                </div>
                <div class="absolute inset-8 planet-orbit" style="animation-duration: 12s;">
                    <div class="w-4 h-4 bg-blue-500 rounded-full absolute top-0 left-1/2 transform -translate-x-1/2"></div>
                </div>
                <div class="w-16 h-16 bg-yellow-400 rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></div>
            </div>
            
            <button onclick="showLoginPage()" class="bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-4 px-8 rounded-full text-xl transform hover:scale-105 transition-all duration-200 shadow-lg">
                ğŸ® å¼€å§‹æ¸¸æˆ
            </button>
        </div>
    </div>
    
    <!-- Login Page -->
    <div id="login-page" class="min-h-screen flex flex-col items-center justify-center p-4 hidden">
        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-8 max-w-md w-full text-center">
            <h2 class="text-3xl font-bold mb-6 text-yellow-300">ğŸŒŸ å°å®‡èˆªå‘˜ç™»å½•</h2>
            
            <div class="mb-6">
                <svg width="80" height="80" viewBox="0 0 80 80" class="mx-auto mb-4">
                    <circle cx="40" cy="30" r="15" fill="#f3f4f6" stroke="#374151" stroke-width="2"/>
                    <circle cx="37" cy="27" r="2" fill="#1f2937"/>
                    <circle cx="43" cy="27" r="2" fill="#1f2937"/>
                    <path d="M37 33 Q40 36 43 33" stroke="#1f2937" stroke-width="2" fill="none"/>
                    <rect x="30" y="45" width="20" height="25" rx="3" fill="#3b82f6"/>
                    <rect x="25" y="48" width="10" height="15" rx="2" fill="#3b82f6"/>
                    <rect x="45" y="48" width="10" height="15" rx="2" fill="#3b82f6"/>
                </svg>
            </div>
            
            <div class="mb-4">
                <label class="block text-left mb-2 font-semibold">ğŸ‘¤ ä½ çš„å§“åï¼š</label>
                <input type="text" id="student-name" class="w-full p-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/70" placeholder="è¯·è¾“å…¥ä½ çš„å§“å">
            </div>
            
            <div class="mb-6">
                <label class="block text-left mb-2 font-semibold">ğŸ« ä½ çš„ç­çº§ï¼š</label>
                <input type="text" id="student-class" class="w-full p-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/70" placeholder="ä¾‹å¦‚ï¼šä¸‰å¹´çº§1ç­">
            </div>
            
            <button onclick="startGame()" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-lg text-lg transform hover:scale-105 transition-all duration-200">
                ğŸš€ è¿›å…¥å¤ªç©ºæ¢ç´¢
            </button>
        </div>
    </div>
    
    <!-- Game Page -->
    <div id="game-page" class="min-h-screen p-4 hidden">
        <!-- Game Header -->
        <div class="flex justify-between items-center mb-6 bg-white/10 backdrop-blur-md rounded-2xl p-4">
            <div class="flex items-center space-x-4">
                <span class="text-xl font-bold">ğŸŒŸ <span id="current-student-name"></span></span>
                <span class="text-lg">ğŸ“š <span id="current-student-class"></span></span>
            </div>
            <div class="flex items-center space-x-4">
                <span class="text-xl font-bold">é¢˜ç›® <span id="question-counter">1</span>/10</span>
                <span class="text-xl font-bold">â­ å¾—åˆ†: <span id="current-score">0</span></span>
            </div>
        </div>
        
        <!-- Question Container -->
        <div id="question-container" class="max-w-4xl mx-auto bg-white/10 backdrop-blur-md rounded-3xl p-8">
            <!-- Question content will be inserted here -->
        </div>
        
        <!-- Navigation -->
        <div class="flex justify-center mt-6">
            <button id="next-button" onclick="nextQuestion()" class="bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-8 rounded-full text-lg transform hover:scale-105 transition-all duration-200 hidden">
                ä¸‹ä¸€é¢˜ â¡ï¸
            </button>
        </div>
    </div>
    
    <!-- Results Page -->
    <div id="results-page" class="min-h-screen flex flex-col items-center justify-center p-4 hidden">
        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-8 max-w-2xl w-full text-center">
            <h2 class="text-4xl font-bold mb-6 text-yellow-300">ğŸ‰ æ¸¸æˆå®Œæˆï¼</h2>
            
            <div class="mb-6">
                <div class="text-2xl mb-2">ğŸŒŸ <span id="final-student-name"></span></div>
                <div class="text-xl mb-4">ğŸ“š <span id="final-student-class"></span></div>
                <div class="text-6xl font-bold mb-4 text-yellow-400" id="final-score">0</div>
                <div class="text-2xl mb-4" id="star-rating">â­â­â­â­â­</div>
                <div class="text-xl text-green-300 font-bold" id="praise-text">ä½ æ˜¯å°å°å¤ªç©ºä¸“å®¶ï¼</div>
            </div>
            
            <!-- Solar System Illustration -->
            <div class="relative w-80 h-40 mx-auto mb-6 bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl overflow-hidden">
                <div class="absolute top-1/2 left-8 w-8 h-8 bg-yellow-400 rounded-full transform -translate-y-1/2"></div>
                <div class="absolute top-1/2 left-20 w-2 h-2 bg-gray-400 rounded-full transform -translate-y-1/2"></div>
                <div class="absolute top-1/2 left-28 w-3 h-3 bg-orange-400 rounded-full transform -translate-y-1/2"></div>
                <div class="absolute top-1/2 left-36 w-3 h-3 bg-blue-500 rounded-full transform -translate-y-1/2"></div>
                <div class="absolute top-1/2 left-44 w-2 h-2 bg-red-500 rounded-full transform -translate-y-1/2"></div>
                <div class="absolute top-1/2 left-52 w-4 h-4 bg-orange-300 rounded-full transform -translate-y-1/2"></div>
                <div class="absolute top-1/2 left-60 w-4 h-4 bg-yellow-200 rounded-full transform -translate-y-1/2"></div>
                <div class="absolute top-1/2 left-68 w-3 h-3 bg-blue-300 rounded-full transform -translate-y-1/2"></div>
                <div class="absolute top-1/2 left-76 w-3 h-3 bg-blue-600 rounded-full transform -translate-y-1/2"></div>
            </div>
            
            <div class="flex justify-center space-x-4">
                <button onclick="downloadScoreCard()" class="bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-full text-lg transform hover:scale-105 transition-all duration-200">
                    ğŸ“¥ ä¸‹è½½åˆ†æ•°å¡
                </button>
                <button onclick="restartGame()" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-full text-lg transform hover:scale-105 transition-all duration-200">
                    ğŸ”„ é‡æ–°æ¸¸æˆ
                </button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let currentQuestion = 0;
        let score = 0;
        let studentName = '';
        let studentClass = '';
        let gameQuestions = [];
        let currentAudio = null;
        
        // Question bank with different types and difficulty levels
        const questionBank = [
            // Easy questions (è®°å¿†ã€ç†è§£) - 50%
            {
                type: 'multiple-choice',
                difficulty: 'easy',
                question: 'å¤ªé˜³ç³»ä¸­æœ€å¤§çš„è¡Œæ˜Ÿæ˜¯å“ªä¸€é¢—ï¼Ÿ',
                image: 'ğŸª',
                options: ['æœ¨æ˜Ÿ', 'åœŸæ˜Ÿ', 'åœ°çƒ', 'ç«æ˜Ÿ'],
                correct: 0,
                explanation: 'æœ¨æ˜Ÿæ˜¯å¤ªé˜³ç³»ä¸­æœ€å¤§çš„è¡Œæ˜Ÿï¼'
            },
            {
                type: 'multiple-choice',
                difficulty: 'easy',
                question: 'åœ°çƒæ˜¯å¤ªé˜³ç³»ä¸­ç¬¬å‡ é¢—è¡Œæ˜Ÿï¼Ÿ',
                image: 'ğŸŒ',
                options: ['ç¬¬äºŒé¢—', 'ç¬¬ä¸‰é¢—', 'ç¬¬å››é¢—', 'ç¬¬äº”é¢—'],
                correct: 1,
                explanation: 'åœ°çƒæ˜¯è·ç¦»å¤ªé˜³ç¬¬ä¸‰è¿‘çš„è¡Œæ˜Ÿï¼'
            },
            {
                type: 'multiple-choice',
                difficulty: 'easy',
                question: 'å¤ªé˜³ç³»çš„ä¸­å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿ',
                image: 'â˜€ï¸',
                options: ['æœˆäº®', 'åœ°çƒ', 'å¤ªé˜³', 'æœ¨æ˜Ÿ'],
                correct: 2,
                explanation: 'å¤ªé˜³æ˜¯å¤ªé˜³ç³»çš„ä¸­å¿ƒï¼Œæ‰€æœ‰è¡Œæ˜Ÿéƒ½å›´ç»•å®ƒè½¬ï¼'
            },
            {
                type: 'multiple-choice',
                difficulty: 'easy',
                question: 'å“ªé¢—è¡Œæ˜Ÿè¢«ç§°ä¸º"çº¢è‰²æ˜Ÿçƒ"ï¼Ÿ',
                image: 'ğŸ”´',
                options: ['é‡‘æ˜Ÿ', 'ç«æ˜Ÿ', 'æœ¨æ˜Ÿ', 'åœŸæ˜Ÿ'],
                correct: 1,
                explanation: 'ç«æ˜Ÿå› ä¸ºè¡¨é¢çš„çº¢è‰²è€Œè¢«ç§°ä¸ºçº¢è‰²æ˜Ÿçƒï¼'
            },
            {
                type: 'multiple-choice',
                difficulty: 'easy',
                question: 'å¤ªé˜³ç³»ä¸­æœ‰å¤šå°‘é¢—è¡Œæ˜Ÿï¼Ÿ',
                image: 'ğŸŒŒ',
                options: ['7é¢—', '8é¢—', '9é¢—', '10é¢—'],
                correct: 1,
                explanation: 'å¤ªé˜³ç³»æœ‰8é¢—è¡Œæ˜Ÿï¼'
            },
            {
                type: 'matching',
                difficulty: 'easy',
                question: 'è¯·å°†è¡Œæ˜Ÿä¸å®ƒä»¬çš„ç‰¹å¾é…å¯¹',
                pairs: [
                    { planet: 'åœ°çƒ ğŸŒ', feature: 'æœ‰ç”Ÿå‘½' },
                    { planet: 'åœŸæ˜Ÿ ğŸª', feature: 'æœ‰å…‰ç¯' },
                    { planet: 'ç«æ˜Ÿ ğŸ”´', feature: 'çº¢è‰²çš„' },
                    { planet: 'æœ¨æ˜Ÿ ğŸŸ¤', feature: 'æœ€å¤§çš„' }
                ]
            },
            {
                type: 'drag-sort',
                difficulty: 'easy',
                question: 'è¯·æŒ‰ç…§è·ç¦»å¤ªé˜³ä»è¿‘åˆ°è¿œçš„é¡ºåºæ’åˆ—è¿™äº›è¡Œæ˜Ÿ',
                image: 'â˜€ï¸â¡ï¸',
                items: ['æ°´æ˜Ÿ', 'é‡‘æ˜Ÿ', 'åœ°çƒ', 'ç«æ˜Ÿ'],
                correct: ['æ°´æ˜Ÿ', 'é‡‘æ˜Ÿ', 'åœ°çƒ', 'ç«æ˜Ÿ']
            },
            {
                type: 'multiple-choice',
                difficulty: 'easy',
                question: 'è·ç¦»å¤ªé˜³æœ€è¿‘çš„è¡Œæ˜Ÿæ˜¯ï¼Ÿ',
                image: 'â˜€ï¸',
                options: ['é‡‘æ˜Ÿ', 'æ°´æ˜Ÿ', 'åœ°çƒ', 'ç«æ˜Ÿ'],
                correct: 1,
                explanation: 'æ°´æ˜Ÿæ˜¯è·ç¦»å¤ªé˜³æœ€è¿‘çš„è¡Œæ˜Ÿï¼'
            },
            {
                type: 'multiple-choice',
                difficulty: 'easy',
                question: 'å“ªé¢—è¡Œæ˜Ÿæœ‰ç¾ä¸½çš„å…‰ç¯ï¼Ÿ',
                image: 'ğŸ’',
                options: ['æœ¨æ˜Ÿ', 'åœŸæ˜Ÿ', 'å¤©ç‹æ˜Ÿ', 'æµ·ç‹æ˜Ÿ'],
                correct: 1,
                explanation: 'åœŸæ˜Ÿæœ‰æœ€æ˜æ˜¾ç¾ä¸½çš„å…‰ç¯ï¼'
            },
            {
                type: 'multiple-choice',
                difficulty: 'easy',
                question: 'æœˆäº®å›´ç»•å“ªé¢—è¡Œæ˜Ÿè½¬ï¼Ÿ',
                image: 'ğŸŒ™',
                options: ['å¤ªé˜³', 'ç«æ˜Ÿ', 'åœ°çƒ', 'é‡‘æ˜Ÿ'],
                correct: 2,
                explanation: 'æœˆäº®æ˜¯åœ°çƒçš„å«æ˜Ÿï¼Œå›´ç»•åœ°çƒè½¬ï¼'
            },
            
            // Medium questions (åº”ç”¨ã€åˆ†æ) - 30%
            {
                type: 'multiple-choice',
                difficulty: 'medium',
                question: 'ä¸ºä»€ä¹ˆæ°´æ˜Ÿçš„æ¸©åº¦å˜åŒ–å¾ˆå¤§ï¼Ÿ',
                image: 'ğŸŒ¡ï¸',
                options: ['è·ç¦»å¤ªé˜³å¾ˆè¿‘', 'æ²¡æœ‰å¤§æ°”å±‚ä¿æ¸©', 'è‡ªè½¬å¾ˆæ…¢', 'ä»¥ä¸Šéƒ½æ˜¯'],
                correct: 3,
                explanation: 'æ°´æ˜Ÿè·ç¦»å¤ªé˜³è¿‘ã€æ²¡æœ‰å¤§æ°”å±‚ã€è‡ªè½¬æ…¢ï¼Œæ‰€ä»¥æ¸©åº¦å˜åŒ–å¾ˆå¤§ï¼'
            },
            {
                type: 'drag-sort',
                difficulty: 'medium',
                question: 'è¯·æŒ‰ç…§è¡Œæ˜Ÿå¤§å°ä»å¤§åˆ°å°æ’åˆ—',
                image: 'ğŸ“',
                items: ['æœ¨æ˜Ÿ', 'åœŸæ˜Ÿ', 'æµ·ç‹æ˜Ÿ', 'åœ°çƒ'],
                correct: ['æœ¨æ˜Ÿ', 'åœŸæ˜Ÿ', 'æµ·ç‹æ˜Ÿ', 'åœ°çƒ']
            },
            {
                type: 'multiple-choice',
                difficulty: 'medium',
                question: 'å¦‚æœä½ åœ¨ç«æ˜Ÿä¸Šï¼Œçœ‹åˆ°çš„å¤ªé˜³ä¼šæ¯”åœ¨åœ°çƒä¸Šçœ‹åˆ°çš„ï¼Ÿ',
                image: 'ğŸ‘€',
                options: ['æ›´å¤§æ›´äº®', 'æ›´å°æ›´æš—', 'ä¸€æ ·å¤§å°', 'çœ‹ä¸åˆ°å¤ªé˜³'],
                correct: 1,
                explanation: 'ç«æ˜Ÿè·ç¦»å¤ªé˜³æ›´è¿œï¼Œæ‰€ä»¥å¤ªé˜³çœ‹èµ·æ¥æ›´å°æ›´æš—ï¼'
            },
            {
                type: 'multiple-choice',
                difficulty: 'medium',
                question: 'ä¸ºä»€ä¹ˆå¤–å±‚è¡Œæ˜Ÿï¼ˆæœ¨æ˜Ÿã€åœŸæ˜Ÿç­‰ï¼‰æ¯”å†…å±‚è¡Œæ˜Ÿå¤§ï¼Ÿ',
                image: 'ğŸ§Š',
                options: ['è·ç¦»å¤ªé˜³è¿œï¼Œæ¸©åº¦ä½', 'èƒ½ä¿å­˜æ›´å¤šæ°”ä½“', 'å½¢æˆæ—¶é—´æ›´é•¿', 'å‰ä¸¤ä¸ªéƒ½å¯¹'],
                correct: 3,
                explanation: 'å¤–å±‚è¡Œæ˜Ÿè·ç¦»å¤ªé˜³è¿œï¼Œæ¸©åº¦ä½ï¼Œèƒ½ä¿å­˜æ›´å¤šæ°”ä½“ï¼Œæ‰€ä»¥æ›´å¤§ï¼'
            },
            {
                type: 'matching',
                difficulty: 'medium',
                question: 'è¯·å°†è¡Œæ˜Ÿä¸å®ƒä»¬çš„æ¸©åº¦ç‰¹å¾é…å¯¹',
                pairs: [
                    { planet: 'æ°´æ˜Ÿ â˜€ï¸', feature: 'ç™½å¤©å¾ˆçƒ­ï¼Œå¤œæ™šå¾ˆå†·' },
                    { planet: 'é‡‘æ˜Ÿ ğŸ”¥', feature: 'æœ€çƒ­çš„è¡Œæ˜Ÿ' },
                    { planet: 'åœ°çƒ ğŸŒ¡ï¸', feature: 'æ¸©åº¦é€‚ä¸­' },
                    { planet: 'æµ·ç‹æ˜Ÿ â„ï¸', feature: 'éå¸¸å¯’å†·' }
                ]
            },
            {
                type: 'short-answer',
                difficulty: 'medium',
                question: 'è¯·è¯´å‡ºä¸‰ä¸ªè®©åœ°çƒé€‚åˆç”Ÿå‘½ç”Ÿå­˜çš„æ¡ä»¶',
                image: 'ğŸŒ',
                keywords: ['æ°´', 'æ°§æ°”', 'æ¸©åº¦', 'å¤§æ°”', 'è·ç¦»', 'å¤ªé˜³']
            },
            
            // Hard questions (åˆ›é€ ã€è¯„ä»·) - 20%
            {
                type: 'short-answer',
                difficulty: 'hard',
                question: 'å¦‚æœä½ è¦è®¾è®¡ä¸€ä¸ªå¤ªç©ºç«™ï¼Œä½ ä¼šé€‰æ‹©åœ¨å“ªé¢—è¡Œæ˜Ÿé™„è¿‘ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ',
                image: 'ğŸ›°ï¸',
                keywords: ['åœ°çƒ', 'ç«æ˜Ÿ', 'æœˆçƒ', 'è·ç¦»', 'èµ„æº', 'æ¸©åº¦', 'å®‰å…¨']
            },
            {
                type: 'multiple-choice',
                difficulty: 'hard',
                question: 'ç§‘å­¦å®¶ä¸ºä»€ä¹ˆè®¤ä¸ºç«æ˜Ÿå¯èƒ½æ›¾ç»æœ‰ç”Ÿå‘½ï¼Ÿ',
                image: 'ğŸ”¬',
                options: ['å‘ç°äº†æ°´çš„ç—•è¿¹', 'æ¸©åº¦æ›¾ç»é€‚å®œ', 'æœ‰å¤§æ°”å±‚', 'ä»¥ä¸Šéƒ½æ˜¯'],
                correct: 3,
                explanation: 'ç«æ˜Ÿæœ‰æ°´çš„ç—•è¿¹ã€æ›¾ç»æ¸©åº¦é€‚å®œã€æœ‰å¤§æ°”å±‚ï¼Œæ‰€ä»¥å¯èƒ½æœ‰è¿‡ç”Ÿå‘½ï¼'
            },
            {
                type: 'short-answer',
                difficulty: 'hard',
                question: 'è¯·åˆ›é€ æ€§åœ°æè¿°ä½ æƒ³è±¡ä¸­çš„å¤–æ˜Ÿç”Ÿç‰©ä¼šæ˜¯ä»€ä¹ˆæ ·å­çš„',
                image: 'ğŸ‘½',
                keywords: ['æƒ³è±¡', 'åˆ›æ„', 'å¤–æ˜Ÿ', 'ç”Ÿç‰©', 'ç‰¹å¾']
            },
            {
                type: 'multiple-choice',
                difficulty: 'hard',
                question: 'å¦‚æœåœ°çƒè·ç¦»å¤ªé˜³æ›´è¿‘ä¸€äº›ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ',
                image: 'ğŸŒ¡ï¸',
                options: ['ä¼šæ›´å†·', 'ä¼šæ›´çƒ­ï¼Œå¯èƒ½æ²¡æœ‰ç”Ÿå‘½', 'æ²¡æœ‰å˜åŒ–', 'ä¼šæœ‰æ›´å¤šæ°´'],
                correct: 1,
                explanation: 'å¦‚æœåœ°çƒè·ç¦»å¤ªé˜³æ›´è¿‘ï¼Œä¼šå¤ªçƒ­ï¼Œæ°´ä¼šè’¸å‘ï¼Œå¯èƒ½æ²¡æœ‰ç”Ÿå‘½ï¼'
            }
        ];
        
        // Initialize stars
        function createStars() {
            const container = document.getElementById('stars-container');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(star);
            }
        }
        
        // Text-to-speech function
        function speakText(text) {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-CN';
                utterance.rate = 0.8;
                utterance.pitch = 1.2;
                speechSynthesis.speak(utterance);
            }
        }
        
        // Show login page
        function showLoginPage() {
            document.getElementById('welcome-page').classList.add('hidden');
            document.getElementById('login-page').classList.remove('hidden');
        }
        
        // Start game
        function startGame() {
            const name = document.getElementById('student-name').value.trim();
            const className = document.getElementById('student-class').value.trim();
            
            if (!name || !className) {
                alert('è¯·è¾“å…¥ä½ çš„å§“åå’Œç­çº§ï¼');
                return;
            }
            
            studentName = name;
            studentClass = className;
            
            document.getElementById('current-student-name').textContent = name;
            document.getElementById('current-student-class').textContent = className;
            
            // Select random questions
            gameQuestions = selectRandomQuestions();
            currentQuestion = 0;
            score = 0;
            
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('game-page').classList.remove('hidden');
            
            showQuestion();
        }
        
        // Select random questions with difficulty distribution
        function selectRandomQuestions() {
            const easy = questionBank.filter(q => q.difficulty === 'easy');
            const medium = questionBank.filter(q => q.difficulty === 'medium');
            const hard = questionBank.filter(q => q.difficulty === 'hard');
            
            const selected = [];
            
            // 50% easy (5 questions)
            for (let i = 0; i < 5; i++) {
                const randomIndex = Math.floor(Math.random() * easy.length);
                selected.push(easy[randomIndex]);
                easy.splice(randomIndex, 1);
            }
            
            // 30% medium (3 questions)
            for (let i = 0; i < 3; i++) {
                const randomIndex = Math.floor(Math.random() * medium.length);
                selected.push(medium[randomIndex]);
                medium.splice(randomIndex, 1);
            }
            
            // 20% hard (2 questions)
            for (let i = 0; i < 2; i++) {
                const randomIndex = Math.floor(Math.random() * hard.length);
                selected.push(hard[randomIndex]);
                hard.splice(randomIndex, 1);
            }
            
            // Shuffle the selected questions
            return selected.sort(() => Math.random() - 0.5);
        }
        
        // Show current question
        function showQuestion() {
            const question = gameQuestions[currentQuestion];
            const container = document.getElementById('question-container');
            
            document.getElementById('question-counter').textContent = currentQuestion + 1;
            document.getElementById('next-button').classList.add('hidden');
            
            let html = `
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">${question.image || 'ğŸŒŒ'}</div>
                    <h3 class="text-2xl font-bold mb-4">${question.question}</h3>
                    <button onclick="speakText('${question.question}')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full mb-4">
                        ğŸ”Š å¬é¢˜ç›®
                    </button>
                </div>
            `;
            
            if (question.type === 'multiple-choice') {
                html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-4">';
                question.options.forEach((option, index) => {
                    html += `
                        <button onclick="selectAnswer(${index})" class="option-btn bg-white/20 hover:bg-white/30 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-200 transform hover:scale-105">
                            ${String.fromCharCode(65 + index)}. ${option}
                        </button>
                    `;
                });
                html += '</div>';
            } else if (question.type === 'drag-sort') {
                html += `
                    <div class="mb-6">
                        <p class="text-lg mb-4">æ‹–æ‹½ä¸‹é¢çš„é€‰é¡¹åˆ°æ­£ç¡®ä½ç½®ï¼š</p>
                        <div id="drag-items" class="flex flex-wrap justify-center gap-4 mb-6">
                `;
                const shuffled = [...question.items].sort(() => Math.random() - 0.5);
                shuffled.forEach((item, index) => {
                    html += `
                        <div class="draggable bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg cursor-move" draggable="true" data-item="${item}">
                            ${item}
                        </div>
                    `;
                });
                html += `
                        </div>
                        <div id="drop-zones" class="space-y-2">
                `;
                question.items.forEach((_, index) => {
                    html += `
                        <div class="drop-zone bg-white/10 border-2 border-dashed border-blue-400 rounded-lg p-4 min-h-12 flex items-center justify-center" data-position="${index}">
                            ä½ç½® ${index + 1}
                        </div>
                    `;
                });
                html += `
                        </div>
                        <button onclick="checkDragSort()" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full">
                            æ£€æŸ¥ç­”æ¡ˆ
                        </button>
                    </div>
                `;
            } else if (question.type === 'matching') {
                html += `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-xl font-bold mb-4">è¡Œæ˜Ÿ</h4>
                            <div class="space-y-2">
                `;
                question.pairs.forEach((pair, index) => {
                    html += `
                        <div class="match-item bg-blue-500 text-white font-bold py-2 px-4 rounded-lg cursor-pointer" data-type="planet" data-index="${index}">
                            ${pair.planet}
                        </div>
                    `;
                });
                html += `
                            </div>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold mb-4">ç‰¹å¾</h4>
                            <div class="space-y-2">
                `;
                const shuffledFeatures = [...question.pairs].sort(() => Math.random() - 0.5);
                shuffledFeatures.forEach((pair, index) => {
                    const originalIndex = question.pairs.findIndex(p => p.feature === pair.feature);
                    html += `
                        <div class="match-item bg-green-500 text-white font-bold py-2 px-4 rounded-lg cursor-pointer" data-type="feature" data-index="${originalIndex}">
                            ${pair.feature}
                        </div>
                    `;
                });
                html += `
                            </div>
                        </div>
                    </div>
                    <div id="matches" class="mt-6"></div>
                    <button onclick="checkMatching()" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full">
                        æ£€æŸ¥ç­”æ¡ˆ
                    </button>
                `;
            } else if (question.type === 'short-answer') {
                html += `
                    <div class="max-w-2xl mx-auto">
                        <textarea id="short-answer" class="w-full h-32 p-4 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/70 resize-none" placeholder="è¯·åœ¨è¿™é‡Œè¾“å…¥ä½ çš„ç­”æ¡ˆ..."></textarea>
                        <div class="mt-4 flex justify-center space-x-4">
                            <button onclick="checkShortAnswer()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full">
                                æäº¤ç­”æ¡ˆ
                            </button>
                            <button onclick="speakText('è¯·è¯´å‡ºä½ çš„ç­”æ¡ˆ')" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-6 rounded-full">
                                ğŸ¤ è¯­éŸ³å›ç­”
                            </button>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
            
            // Add drag and drop functionality
            if (question.type === 'drag-sort') {
                setupDragAndDrop();
            }
            
            // Add matching functionality
            if (question.type === 'matching') {
                setupMatching();
            }
        }
        
        // Select answer for multiple choice
        function selectAnswer(selectedIndex) {
            const question = gameQuestions[currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            
            buttons.forEach((btn, index) => {
                btn.disabled = true;
                if (index === selectedIndex) {
                    if (index === question.correct) {
                        btn.classList.add('bg-green-500');
                        score++;
                        document.getElementById('current-score').textContent = score;
                    } else {
                        btn.classList.add('bg-red-500');
                    }
                } else if (index === question.correct) {
                    btn.classList.add('bg-green-500');
                }
            });
            
            // Show explanation
            setTimeout(() => {
                const container = document.getElementById('question-container');
                container.innerHTML += `
                    <div class="mt-6 p-4 bg-blue-500/30 rounded-lg">
                        <p class="text-lg font-bold">ğŸ’¡ ${question.explanation}</p>
                    </div>
                `;
                document.getElementById('next-button').classList.remove('hidden');
            }, 1000);
        }
        
        // Setup drag and drop
        function setupDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');
            
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', e.target.dataset.item);
                });
            });
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });
                
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const item = e.dataTransfer.getData('text/plain');
                    zone.textContent = item;
                    zone.classList.remove('drag-over');
                    zone.classList.add('bg-blue-500/30');
                });
            });
        }
        
        // Check drag sort answer
        function checkDragSort() {
            const question = gameQuestions[currentQuestion];
            const dropZones = document.querySelectorAll('.drop-zone');
            const userAnswer = Array.from(dropZones).map(zone => zone.textContent.trim());
            
            let correct = true;
            dropZones.forEach((zone, index) => {
                if (userAnswer[index] === question.correct[index]) {
                    zone.classList.add('bg-green-500/50');
                } else {
                    zone.classList.add('bg-red-500/50');
                    correct = false;
                }
            });
            
            if (correct) {
                score++;
                document.getElementById('current-score').textContent = score;
            }
            
            setTimeout(() => {
                document.getElementById('next-button').classList.remove('hidden');
            }, 1000);
        }
        
        // Setup matching
        let selectedMatches = [];
        function setupMatching() {
            const matchItems = document.querySelectorAll('.match-item');
            
            matchItems.forEach(item => {
                item.addEventListener('click', () => {
                    if (selectedMatches.length < 2 && !selectedMatches.includes(item)) {
                        item.classList.add('ring-4', 'ring-yellow-400');
                        selectedMatches.push(item);
                        
                        if (selectedMatches.length === 2) {
                            const [first, second] = selectedMatches;
                            if (first.dataset.index === second.dataset.index) {
                                // Correct match
                                first.classList.remove('ring-4', 'ring-yellow-400');
                                second.classList.remove('ring-4', 'ring-yellow-400');
                                first.classList.add('bg-green-600');
                                second.classList.add('bg-green-600');
                                
                                const matchesDiv = document.getElementById('matches');
                                matchesDiv.innerHTML += `
                                    <div class="bg-green-500/30 p-2 rounded-lg mb-2">
                                        âœ… ${first.textContent} â†” ${second.textContent}
                                    </div>
                                `;
                            } else {
                                // Incorrect match
                                setTimeout(() => {
                                    first.classList.remove('ring-4', 'ring-yellow-400');
                                    second.classList.remove('ring-4', 'ring-yellow-400');
                                }, 1000);
                            }
                            selectedMatches = [];
                        }
                    }
                });
            });
        }
        
        // Check matching
        function checkMatching() {
            const correctMatches = document.querySelectorAll('.bg-green-600').length / 2;
            const totalPairs = gameQuestions[currentQuestion].pairs.length;
            
            if (correctMatches === totalPairs) {
                score++;
                document.getElementById('current-score').textContent = score;
            }
            
            document.getElementById('next-button').classList.remove('hidden');
        }
        
        // Check short answer
        function checkShortAnswer() {
            const answer = document.getElementById('short-answer').value.trim().toLowerCase();
            const question = gameQuestions[currentQuestion];
            
            let hasKeyword = false;
            question.keywords.forEach(keyword => {
                if (answer.includes(keyword.toLowerCase())) {
                    hasKeyword = true;
                }
            });
            
            if (hasKeyword && answer.length > 10) {
                score++;
                document.getElementById('current-score').textContent = score;
                
                const container = document.getElementById('question-container');
                container.innerHTML += `
                    <div class="mt-6 p-4 bg-green-500/30 rounded-lg">
                        <p class="text-lg font-bold">ğŸ‰ å¾ˆå¥½çš„å›ç­”ï¼ä½ çš„æƒ³æ³•å¾ˆæ£’ï¼</p>
                    </div>
                `;
            } else {
                const container = document.getElementById('question-container');
                container.innerHTML += `
                    <div class="mt-6 p-4 bg-blue-500/30 rounded-lg">
                        <p class="text-lg font-bold">ğŸ’­ ä¸é”™çš„å°è¯•ï¼ç»§ç»­æ€è€ƒå’Œæ¢ç´¢ï¼</p>
                    </div>
                `;
            }
            
            document.getElementById('next-button').classList.remove('hidden');
        }
        
        // Next question
        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion < gameQuestions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }
        
        // Show results
        function showResults() {
            document.getElementById('game-page').classList.add('hidden');
            document.getElementById('results-page').classList.remove('hidden');
            
            document.getElementById('final-student-name').textContent = studentName;
            document.getElementById('final-student-class').textContent = studentClass;
            document.getElementById('final-score').textContent = score + '/10';
            
            // Calculate stars
            let stars = '';
            if (score >= 9) stars = 'â­â­â­â­â­';
            else if (score >= 7) stars = 'â­â­â­â­â˜†';
            else if (score >= 5) stars = 'â­â­â­â˜†â˜†';
            else if (score >= 3) stars = 'â­â­â˜†â˜†â˜†';
            else stars = 'â­â˜†â˜†â˜†â˜†';
            
            document.getElementById('star-rating').textContent = stars;
            
            // Praise text
            let praise = '';
            if (score >= 9) praise = 'ä½ æ˜¯è¶…çº§å¤ªç©ºä¸“å®¶ï¼ğŸš€';
            else if (score >= 7) praise = 'ä½ æ˜¯å°å°å¤ªç©ºä¸“å®¶ï¼ğŸŒŸ';
            else if (score >= 5) praise = 'ä½ å¯¹å¤ªé˜³ç³»å¾ˆäº†è§£ï¼ğŸŒ';
            else if (score >= 3) praise = 'ç»§ç»­æ¢ç´¢å¤ªç©ºçš„å¥¥ç§˜ï¼ğŸ”­';
            else praise = 'å¤ªç©ºæ¢ç´¢æ‰åˆšåˆšå¼€å§‹ï¼ğŸ›¸';
            
            document.getElementById('praise-text').textContent = praise;
        }
        
        // Download score card
        function downloadScoreCard() {
            // Create a canvas for the score card
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 800;
            canvas.height = 600;
            
            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, 600);
            gradient.addColorStop(0, '#1e1b4b');
            gradient.addColorStop(1, '#000000');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 800, 600);
            
            // Title
            ctx.fillStyle = '#fbbf24';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ğŸš€ æ¢ç´¢å¤ªé˜³ç³» ğŸŒŸ', 400, 80);
            
            // Student info
            ctx.fillStyle = '#ffffff';
            ctx.font = '32px Arial';
            ctx.fillText(`å­¦ç”Ÿï¼š${studentName}`, 400, 150);
            ctx.fillText(`ç­çº§ï¼š${studentClass}`, 400, 200);
            
            // Score
            ctx.fillStyle = '#fbbf24';
            ctx.font = 'bold 72px Arial';
            ctx.fillText(`${score}/10`, 400, 300);
            
            // Stars
            ctx.font = '48px Arial';
            const stars = score >= 9 ? 'â­â­â­â­â­' : score >= 7 ? 'â­â­â­â­â˜†' : score >= 5 ? 'â­â­â­â˜†â˜†' : score >= 3 ? 'â­â­â˜†â˜†â˜†' : 'â­â˜†â˜†â˜†â˜†';
            ctx.fillText(stars, 400, 380);
            
            // Praise
            ctx.fillStyle = '#10b981';
            ctx.font = 'bold 28px Arial';
            const praise = score >= 9 ? 'ä½ æ˜¯è¶…çº§å¤ªç©ºä¸“å®¶ï¼' : score >= 7 ? 'ä½ æ˜¯å°å°å¤ªç©ºä¸“å®¶ï¼' : score >= 5 ? 'ä½ å¯¹å¤ªé˜³ç³»å¾ˆäº†è§£ï¼' : score >= 3 ? 'ç»§ç»­æ¢ç´¢å¤ªç©ºçš„å¥¥ç§˜ï¼' : 'å¤ªç©ºæ¢ç´¢æ‰åˆšåˆšå¼€å§‹ï¼';
            ctx.fillText(praise, 400, 450);
            
            // Date
            ctx.fillStyle = '#9ca3af';
            ctx.font = '20px Arial';
            ctx.fillText(`å®Œæˆæ—¶é—´ï¼š${new Date().toLocaleDateString('zh-CN')}`, 400, 520);
            
            // Download
            const link = document.createElement('a');
            link.download = `æ¢ç´¢å¤ªé˜³ç³»_${studentName}_${studentClass}.jpg`;
            link.href = canvas.toDataURL('image/jpeg');
            link.click();
        }
        
        // Restart game
        function restartGame() {
            currentQuestion = 0;
            score = 0;
            selectedMatches = [];
            
            document.getElementById('results-page').classList.add('hidden');
            document.getElementById('welcome-page').classList.remove('hidden');
        }
        
        // Initialize
        createStars();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9662b0af82436e6b',t:'MTc1MzY4ODAyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
